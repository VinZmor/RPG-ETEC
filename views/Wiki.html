{% extends 'base.html' %}

{% block content %}

<div id="fundo" class="d-flex">

  <nav id="sidebar">
    <span class="h5">Vale Místico</span>
    <ul class="nav flex-column mt-3">
      <li class="nav-item">
        <a href="#" data-id="introducao" class="nav-link">Introdução</a>
        <ul id="introducao-sub" class="nav flex-column ms-3 d-none">
          <li class="nav-item"><a href="#" data-id="rpg" class="nav-link">RPG</a></li>
          <li class="nav-item"><a href="#" data-id="interpretacao" class="nav-link">Interpretação</a></li>
          <li class="nav-item"><a href="#" data-id="seuPersonagem" class="nav-link">Seu Personagem</a></li>
          <li class="nav-item"><a href="#" data-id="narrando" class="nav-link">Narrando</a></li>
          <li class="nav-item"><a href="#" data-id="ficha" class="nav-link">Preenchendo sua Ficha</a></li>
          <li class="nav-item"><a href="#" data-id="equipamento" class="nav-link">Equipamento</a></li>
          <li class="nav-item"><a href="#" data-id="levelUp" class="nav-link">Subindo de Nível</a></li>
          <li class="nav-item"><a href="#" data-id="habilidade" class="nav-link">Habilidades</a></li>
          <li class="nav-item"><a href="#" data-id="regra" class="nav-link">Regras</a></li>
          <li class="nav-item"><a href="#" data-id="glossario" class="nav-link">Glossário</a></li>
          <li class="nav-item"><a href="#" data-id="bestiario" class="nav-link">Bestiário</a></li>
        </ul>
      </li>

      <li class="nav-item">
        <a href="#" data-id="bestiario" class="nav-link">Bestiário</a>
        <ul id="bestiario-sub" class="nav flex-column ms-3 d-none">
          {% for bestiario in rpg_bestiario %}
          <li class="nav-item">
            <a href="#" data-id="D" class="nav-link">{{ bestiario.nome }}</a>
          </li>
          {% endfor %}
        </ul>
      </li>

      <li class="nav-item">
        <a href="#" data-id="antepassados" class="nav-link">Antepassados</a>
        <ul id="antepassados-sub" class="nav flex-column ms-3 d-none">
          {% for antepassado in rpg_antepassado %}
          <li class="nav-item">
            <a href="#" data-id="A" class="nav-link">{{ antepassado.nome }}</a>
          </li>
          {% endfor %}
        </ul>
      </li>

      <li class="nav-item">
        <a href="#" data-id="equipamentos" class="nav-link">Equipamentos</a>
        <ul id="equipamentos-sub" class="nav flex-column ms-3 d-none">
          {% for equipamento in rpg_equipamento %}
          <li class="nav-item">
            <a href="#" class="nav-link">{{ equipamento.nome }}</a>
          </li>
          {% endfor %}
        </ul>
      </li>

      <li class="nav-item">
        <a href="#" data-id="habilidades" class="nav-link">Habilidades</a>
        <ul id="habilidades-sub" class="nav flex-column ms-3 d-none">
          {% for habilidade in rpg_habilidade %}
          <li class="nav-item">
            <a href="#" data-id="B" class="nav-link">{{ habilidade.id }}</a>
          </li>
          {% endfor %}
        </ul>
      </li>

      <li class="nav-item">
        <a href="#" data-id="poderes" class="nav-link">Poderes</a>
        <ul id="poderes-sub" class="nav flex-column ms-3 d-none">
          {% for poder in rpg_poder %}
          <li class="nav-item">
            <a href="#" data-id="C" class="nav-link">{{ poder.id }}</a>
          </li>
          {% endfor %}
        </ul>
      </li>
    </ul>
  </nav>

  <main id="content" class="flex-grow p-3">
    <!-- As informações = ao data-content -->
    <section data-content="rpg" class="content-section d-none">
      <h1 class="h3 text-primary">RPG</h1>
      <p>Um jogo de RPG (Role-Playing Game), traduzido para jogo interpretativo, tem uma estrutura relativamente simples...</p>
    </section>

    <section data-content="interpretacao" class="content-section d-none">
      <h1 class="h3 text-primary">Interpretação</h1>
      <p>Vale Místico é um jogo de interpretação antes de tudo...</p>
    </section>

    <section data-content="seuPersonagem" class="content-section d-none">
      <h1 class="h3 text-primary">Seu Personagem</h1>
      <p>Todo jogador deve criar um personagem, definindo personalidade e história...</p>
    </section>

    <section data-content="narrando" class="content-section d-none">
      <h1 class="h3 text-primary">Narrando</h1>
      <p>O mestre deve focar no clima da cena...</p>
    </section>

    <section data-content="ficha" class="content-section d-none">
      <h1 class="h3 text-primary">Preenchendo sua Ficha</h1>
      <ol class="list-ordered">
        <li><strong>Biografia:</strong> Nome, idade, história...</li>
        <li><strong>Antepassado:</strong> Define equipamento inicial...</li>
        <li><strong>Atributos:</strong> Capacidades físicas e mentais...</li>
      </ol>
    </section>

    <section data-content="equipamento" class="content-section d-none">
      <h1 class="h3 text-primary">Equipamento</h1>
      <p>Inclui todos os itens que você carrega durante a aventura...</p>
    </section>

    <section data-content="levelUp" class="content-section d-none">
      <h1 class="h3 text-primary">Subindo de Nível</h1>
      <p>Ao subir de nível, distribua novos pontos de atributo...</p>
    </section>

    {% for antepassado in rpg_antepassado %}
    <section data-content="A" class="content-section d-none">
      <h1 class="h3 text-primary">{{ antepassado.pericia }}</h1>
      <p><strong>Descrição:</strong> {{ antepassado.descricao }}</p>
    </section>
    {% endfor %}

    <section data-content="B" class="content-section d-none">
      <h1 class="h3 text-primary">Habilidades</h1>
      <p>Nenhuma habilidade listada.</p>
    </section>

    {% for poder in rpg_poder %}
    <section data-content="C" class="content-section d-none">
      <h1 class="h3 text-primary">{{ poder.nome }}</h1>
      <p><strong>Requisito:</strong> {{ poder.requisito }}</p>
    </section>
    {% endfor %}

    {% for bestiario in rpg_bestiario %}
    <section data-content="D" class="content-section d-none">
      <h1 class="h3 text-primary">{{ bestiario.nome }}</h1>
      <p><strong>Descrição:</strong> {{ bestiario.descricao }}</p>
    </section>
    {% endfor %}
  </main>
</div>

<!-- JavaScript -->
<script>
  function showContent(id) {
    document.querySelectorAll('.content-section').forEach(sec => {
      sec.classList.toggle('d-none', sec.getAttribute('data-content') !== id);
    });
  }
  document.querySelectorAll('.nav-link').forEach(el => {
    el.addEventListener('click', e => {
      e.preventDefault();
      const id = el.dataset.id;
      if (!id) return;
      // Fecha todos os submenus primeiro
      document.querySelectorAll('nav ul[id$="-sub"]').forEach(sub => {
        sub.classList.add('d-none');
      });
      
      // Mostra o conteúdo correspondente
      showContent(id);
      // Remove a classe 'active' de todos os links
      document.querySelectorAll('.nav-link').forEach(nav => {
        nav.classList.remove('active');
      });
      
      // Adiciona 'active' apenas ao link clicado
      el.classList.add('active');
      // Se o link clicado tem um submenu, alterna sua visibilidade
      const submenu = document.getElementById(`${id}-sub`);
      if (submenu) {
        submenu.classList.toggle('d-none');
      }
    });
  });
</script>

{% endblock content %}
